<!DOCTYPE html>


  <html class="light page-post">


<head>
  <meta charset="utf-8">
  
  <title>Distributed Systems-Paxos | feilengcui008</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
    <meta name="keywords" content="一致性算法,分布式系统," />
  

  <meta name="description" content="本文主要提炼了《Paxos Made Simple》中的一些主要观点，然后加上自己的理解，使用通俗的语言尝试做一些解释。

关于Paxos算法背景和一致性相关问题可以参见原论文

算法涉及的主要对象

action 对一条记录(某个变量)的一次操作(这一点只是本人便于后面理解加上的)
这里选用操作这个词，而不是值，因为一个在对某个变量达成某个值的共识前可能已经经过多个更新操作，所以为了区别，使用操">
<meta property="og:type" content="article">
<meta property="og:title" content="Distributed Systems-Paxos">
<meta property="og:url" content="/2015/12/18/Distributed-Systems-Paxos/index.html">
<meta property="og:site_name" content="feilengcui008">
<meta property="og:description" content="本文主要提炼了《Paxos Made Simple》中的一些主要观点，然后加上自己的理解，使用通俗的语言尝试做一些解释。

关于Paxos算法背景和一致性相关问题可以参见原论文

算法涉及的主要对象

action 对一条记录(某个变量)的一次操作(这一点只是本人便于后面理解加上的)
这里选用操作这个词，而不是值，因为一个在对某个变量达成某个值的共识前可能已经经过多个更新操作，所以为了区别，使用操">
<meta property="og:updated_time" content="2017-04-01T09:24:34.743Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Distributed Systems-Paxos">
<meta name="twitter:description" content="本文主要提炼了《Paxos Made Simple》中的一些主要观点，然后加上自己的理解，使用通俗的语言尝试做一些解释。

关于Paxos算法背景和一致性相关问题可以参见原论文

算法涉及的主要对象

action 对一条记录(某个变量)的一次操作(这一点只是本人便于后面理解加上的)
这里选用操作这个词，而不是值，因为一个在对某个变量达成某个值的共识前可能已经经过多个更新操作，所以为了区别，使用操">

  

  
    <link rel="icon" href="/favicon.ico">
  

  <link href="/css/styles.css?v=c114cbe6" rel="stylesheet">


  
    <link rel="stylesheet" href="/css/personal-style.css" type="text/css">
  

  

  
  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "//hm.baidu.com/hm.js?680ac17b792b826fa89a5e326d73e316";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>


  
  <script type="text/javascript">
	(function(){
	    var bp = document.createElement('script');
	    var curProtocol = window.location.protocol.split(':')[0];
	    if (curProtocol === 'https') {
	        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
	    }
	    else {
	        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
	    }
	    var s = document.getElementsByTagName("script")[0];
	    s.parentNode.insertBefore(bp, s);
	})();
  </script>



  
    <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  

  
    <link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.3.0/css/font-awesome.min.css">
  
</head>

<body>

  <div class="sidebar-toggle-parent">
  <div class="sidebar-toggle">
    <a href="/"><span class="hfont">H</span></a>
  </div>
</div>


  

  <!--
<div class="post-header">
   

</div>
-->




<div class="content content-post CENTER">
   <article id="post-Distributed-Systems-Paxos" class="article article-type-post" itemprop="blogPost">
  <header class="article-header">
    <h1 class="post-title">Distributed Systems-Paxos</h1>

    <div class="article-meta">
      <span>
        <i class="icon-calendar"></i>
        <span>2015.12.18</span>
      </span>

      
        <span class="article-author">
          <i class="icon-user"></i>
          <span>feilengcui008</span>
        </span>
      

      
  <span class="article-category">
    <i class="icon-list"></i>
    <a class="article-category-link" href="/categories/系统/">系统</a>
  </span>



      
        <span>
          <i class="icon-comment"></i>
          <a href="http://feilengcui008.github.io//2015/12/18/Distributed-Systems-Paxos/#disqus_thread"></a>
        </span>
      

      
      <i class="fa fa-eye"></i> 
        <span id="busuanzi_container_page_pv">
           &nbsp热度 <span id="busuanzi_value_page_pv">
           <i class="fa fa-spinner fa-spin"></i></span>℃
        </span>
      

      
      
    </div>
  </header>

  <div class="article-content">
    
      <p>本文主要提炼了《Paxos Made Simple》中的一些主要观点，然后加上自己的理解，使用通俗的语言尝试做一些解释。</p>
<ul>
<li><p>关于Paxos算法背景和一致性相关问题可以参见原论文</p>
</li>
<li><p>算法涉及的主要对象</p>
<ul>
<li>action 对一条记录(某个变量)的一次操作(这一点只是本人便于后面理解加上的)<ul>
<li>这里选用操作这个词，而不是值，因为一个在对某个变量达成某个值的共识前可能已经经过多个更新操作，所以为了区别，使用操作作为每次proposal的对象，而操作的值代表具体的修改动作，而且这也算是状态机复制(SMR)的一个基本组成单元，个人感觉更易于理解。比如action(log_id, log_content)，log_id全局标识了此action的唯一性，log_content通常是针对某条记录的修改，可看做action的值。       </li>
</ul>
</li>
<li>proposer <ul>
<li>发起proposal的机器，注意在Paxos算法中允许多台机器同时发起proposal，并且有可能由于并发获取”需要达成一致的下一操作(action)”，从而使得不同的proposal针对同一个”需要达成一致的下一操作”达成共识，但是算法保证了其达成共识的action的值相同。</li>
</ul>
</li>
<li>acceptor <ul>
<li>接受来自proposer的proposal，并根据对于proposer的prepare和accept消息做出响应。</li>
</ul>
</li>
<li>learner <ul>
<li>从错误中恢复的机器，需要重新学习出错之前最后一次accpet的proposal id之后的所有proposal</li>
</ul>
</li>
</ul>
</li>
<li><p>Paxos instance </p>
<ul>
<li>针对某个”需要达成一致的操作(action)”运行一次Paxos算法的完整过程。</li>
</ul>
</li>
<li><p>算法推导逻辑</p>
<ul>
<li>P0. To ensure data integrity under fault tolerence, a proposal is succeeded only when more than half machines accepted the proposal. </li>
<li>notice: P1[a] stands for requirement and algorithm for acceptors; P2[abc] stands for requirement and algorithm for proposer.</li>
<li>P1. An acceptor must accept the first proposal that it receives<br>  =&gt; problem : maybe two proposal are proposed at the same time and two less-than-half machine quorums receive separately these two different proposals, then these two proposals can not be succeeded.<br>  =&gt; so we must allow each acceptor to receive multiple proposals for the same value<br>  =&gt; so we must give each proposal a global unique and increasing id  </li>
<li>P1a. An acceptor can accept a proposal numbered n iff it has not responed to a prepare request having a number greater than n<br>  =&gt; P1a -&gt; P1 because this can ensure acceptor do not receive the before proposals which arrive later<br>  =&gt; so we ignore these proposal whose id  is &lt;= accepted and prepared id of acceptors  </li>
<li>P2. If a proposal with value v is chosen, then every higher-numbered proposal that is chosen has value v<br>  =&gt; this is because we must ensure there is only a specific value chosen for a specific paxos instance which may contains multiple proposals </li>
<li>P2a. if a proposal with value v is chosen, then every higher-numbered proposal accepted by any acceptor has value v<br>  =&gt; notice: P2a -&gt; P2 </li>
<li>P2b. if a proposal with value v is chosen, then every higher-numbered proposal issued by any proposer has value v<br>  =&gt; notice: P2b -&gt; P2a -&gt; P2 </li>
<li><p>P2c. for any v and n, if a proposal with value v and number n is issued, then there is a set S consisting of a majority of acceptors such that either</p>
<ul>
<li>(a) no acceptor in S has accepted any proposal numbered less than n</li>
<li>(b) v is set to the value of the highest-numbered proposal among all proposals numbered less than n and accepted by the acceptors in S<br>=&gt; notice: P2c -&gt; P2b -&gt; P2a -&gt; P2<br>=&gt; this is the specific algorithm for proposer in prepare phase</li>
</ul>
</li>
<li><p>总结</p>
<ul>
<li>根据上面的推导，核心的就两点，P1a和P2c，P1a规定了acceptor的行为，P2c规定了proposer的行为，由于P2c的需求，决定了需要有prepare阶段，这阶段主要是为了accept阶段为当前proposal设置正确的值。</li>
</ul>
</li>
</ul>
</li>
<li><p>算法基本流程<br>论文上主要有prepare和accept两个阶段，省略了选action(值)和选proposal id的阶段</p>
<ul>
<li>0.数据结构 <ul>
<li>每台机器需要记录最大accpeted的proposal id(latest_accepted_id)和对应的accepted的操作(latest_accepted_action)以及最大promised的proposal id(latest_promised_id)，这些数据需要刷盘。</li>
</ul>
</li>
<li>1.选择需要达成一致的操作 <ul>
<li>来自客户端的请求，比如 Action{write A 12} =&gt; 通常这作为需要达成的某个操作的值，还需要一个全局唯一的id标识这个操作，比如对于某个log记录达成一致，需要寻找下一次需要记录的log id，这就需要向其他节点询问其记录的最近log id，并取最大值+1作为下一次需要达成一致的”记录日志这个操作(action)”的action(log) id。而这个过程可能会产生并发问题，即不同的机器可能针对同一个log id发起proposal，这一点后面阶段保证了一旦达成了proposal，则后续所有proposal都以相同的操作(值)达成。</li>
</ul>
</li>
<li>2.选择proposal id <ul>
<li>proposal id需要保证全局唯一递增(这个后面补充)。</li>
</ul>
</li>
<li><p>3.prepare </p>
<ul>
<li>假设2中选择的proposal id为n，proposer发送prepare(n)给大多数机器<ul>
<li>对于acceptor，如果(n &gt; latest_promised_id) /\ (n &gt; latest_promised_id)<ul>
<li>如果acceptor已经有latest_accepted_id(说明之前对于同一个操作已经达到proposal了)，则返回对应于latest_accepted_id的操作的值，为了accept阶段保证当前的proposal和以前已经达成的proposal最终操作值一样。</li>
<li>如果acceptor没有latest_accepted_id(说明之前还未达成proposal)，则不用返回值(accept阶段可以使用任意proposed的值)　</li>
<li>令latest_accepted_id = latest_promised_id = n，并保证不再接受proposal id小于latest_promised_id的proposal<ul>
<li>否则acceptor返回拒绝，重新开始算法。</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>4.accept </p>
<ul>
<li>proposer收到大多数的机器对prepare的回复<ul>
<li>如果返回消息中latest_accepted_action集合不为空，则将当前proposal的action设置为对应于最大latest_accepted_id的latest_accepted_action，发送accept(n, action)消息</li>
<li>如果返回消息中latest_accepted_action集合为空，则直接使用当前proposal的action(也就是论文中所说的any value)，发送accept(n, action)消息　</li>
</ul>
</li>
<li>如果acceptor收到accept(n, action)消息时<ul>
<li>latest_promised_id &gt; n(说明有更新的)，则放弃当前proposal，重新进入算法。</li>
<li>否则接受proposal，完成此次proposal</li>
</ul>
</li>
<li>如果proposer收到大多数acceptor的成功消息，则成功返回给客户端，否则重新进入算法，由于liveness requirement，一个proposed的value必须eventually chosen，所以要么客户端返回成功，要么客户端请求超时，对于超时，客户端需要重新发起读的请求，此时可能已经成功了，否则继续重新发超时请求。</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p>几点辅助理解的说明</p>
<ul>
<li><p>多数是为了保证至少会有一台机器记录了上次达成的proposal的值，这样保证在不多于n/2台机器挂掉的条件下，在每次proposal的过程中，至少有一台机器有前面所有的proposal值的记录，从而保证所有的数据的完整。</p>
</li>
<li><p>一轮paxos instance 是针对某个变量的一次操作的，而不是同一个变量。比如针对同一变量的一次操作打一次log，而这个log id应当是唯一的，而且针对这条log可能会有多次proposal，但是只要有一次proposal已经达成，那么针对这条log的proposal只能使用相同的log值更新(这也是为什么在prepare返回阶段，如果有一个acceptor已经达成过proposal，则返回其值替换当前proposal值)。</p>
</li>
<li><p>对某个唯一的记录比如log或者变量的某次操作达成一致，那么proposer在发起proposal之前必定要到某个地方取下次需要达成一致的值，比如下一条日志记录的id，某个变量的下一个版本(某个变量的下一次操作)。而由于proposer可能有多个，那么在并发发起proposal时，不同的proposal可能会针对相同的某次操作，这时对于后达成的proposal来说，只能将其propose的值换为已经达成的proposal的值，而这个过程是通过prepare阶段accptor返回的结果集是否空来判断的。如果结果集不为空，说明针对此次操作，之前已经达成了一致，则后续proposal只能使用相同值；如果为空，那么可以使用此次proposal的值(也就是论文中所说的any value)。另外，在accept阶段，如果有accptor的最小promise　id大于当前proposal id，那么说明已经有更更大proposal id的proposal先到达了(此时不管之前是否已经达成一致)，此时需要放弃当前次的proposal </p>
</li>
</ul>
</li>
</ul>
<hr>
<p>下面给一个一轮Paxos的伪代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一轮Paxos协议的流程</span></span><br><span class="line"><span class="comment"># 此处为了清晰将proposer和acceptor的逻辑分开写了，实际上原论文中一个server既可以做proposer也可以做acceptor</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 对每一个值(比如logid唯一的一条日志)可能会同时发起写请求(比如两个客户端并发访问qorumn里面的两个server)</span></span><br><span class="line"><span class="comment"># 所以此时这两个server都是proposer，针对同一条logid发起不同ballot number的决议请求。此时，如果是ballot number </span></span><br><span class="line"><span class="comment"># 小的那个决议请求先达到多数派，那么应该保证后到的ballot number的请求使用相同的值。所以Acceptor需要做的事情如下：</span></span><br><span class="line"><span class="comment"># prepare phase:</span></span><br><span class="line"><span class="comment"># 1.如果请求的req_ballot_id比当前server已经应答过的last_ballot_id小，此时直接忽略，因为有更新的投票决议。</span></span><br><span class="line"><span class="comment"># 2.如果请求的req_ballot_id大于等于当前server已经应答过的last_ballot_id，此时使用req_ballot_id更新last_ballot_id，并返回last_voted_value，注意这个可以是空，说明要么是当前这个server以前未参与此值的多数派投票，要么是此值还未达成过多数派投票。</span></span><br><span class="line"><span class="comment"># commit phase:</span></span><br><span class="line"><span class="comment"># 1.如果commit消息数据中的ballot_id与last_ballot_id不同，则放弃</span></span><br><span class="line"><span class="comment"># 2.否则更新相应的值，并写日志</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Acceptor</span><span class="params">(object)</span>:</span></span><br><span class="line">    last_ballot_id = <span class="keyword">None</span> <span class="comment">#我正在等着</span></span><br><span class="line">    last_voted_value = <span class="keyword">None</span></span><br><span class="line">    last_voted_ballot_id = <span class="keyword">None</span> </span><br><span class="line">    servers = []</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handleProposalRequest</span><span class="params">(self, reqData)</span>:</span></span><br><span class="line">        req_ballot_id = reqData.ballot_id</span><br><span class="line">        <span class="keyword">if</span> req_ballot_id &lt;= self.last_ballot_id:</span><br><span class="line">            <span class="keyword">pass</span> <span class="comment"># return nothing </span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            self.last_ballot_id = req_ballot_id </span><br><span class="line">            <span class="keyword">return</span> (self.last_ballot_id, self.last_voted_value, self.last_voted_ballot_id)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handleCommitRequest</span><span class="params">(self, reqData)</span>:</span></span><br><span class="line">        commit_ballot_id = reqData.last_sent_ballot_id</span><br><span class="line">        client_value = reqData.client_req_value </span><br><span class="line">        <span class="keyword">if</span> commit_ballot_id != self.last_ballot_id:</span><br><span class="line">            <span class="keyword">pass</span> </span><br><span class="line">        self.last_ballot_id = self.last_voted_ballot_id = reqData.last_sent_ballot_id</span><br><span class="line">        self.last_voted_value = client_value </span><br><span class="line">        writelog((self.last_ballot_id, self.last_voted_ballot_id, self.last_voted_value))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">writelog</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span> </span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.如果有acceptor接收到其他proposal发出的更大ballot_id的决议请求，那么放弃此次决议　</span></span><br><span class="line"><span class="comment"># 2.如果为达到多数派，放弃此次决议</span></span><br><span class="line"><span class="comment"># 3.如果acceptor中返回的last_voted_value不为空，则将当前proposal的值设置为相同值，进入commit阶段，否则直接用client_req_value作为值进入commit</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proposer</span><span class="params">(object)</span>:</span></span><br><span class="line">    last_sent_ballot_id = <span class="keyword">None</span> </span><br><span class="line">    client_req_value = <span class="keyword">None</span> </span><br><span class="line">    res_data = []</span><br><span class="line">    servers = []</span><br><span class="line">    quorumn_number = <span class="number">5</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sendRequest</span><span class="params">(self, data)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span> </span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">sendProposal</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.last_sent_ballot_id += <span class="number">1</span></span><br><span class="line">        reqData.ballot_id = self.last_sent_ballot_id</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> self.servers:</span><br><span class="line">            sendRequest(i, reqData)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">readData</span><span class="params">(server)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handleEachProposalResponse</span><span class="params">(self, server)</span>:</span></span><br><span class="line">        resData = self.readData(server)</span><br><span class="line">        self.res_data.append((resData.last_ballot_id, resData.last_voted_value, resData.last_voted_ballot_id))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">handleProposalResponse</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> servers:</span><br><span class="line">            handleEachProposalResponse(servers[i])</span><br><span class="line">        res_ballot_id = max([i[<span class="number">0</span>] <span class="keyword">for</span> i <span class="keyword">in</span> self.res_data])</span><br><span class="line">        <span class="keyword">if</span> res_ballot_id &gt; self.last_sent_ballot_id:</span><br><span class="line">            <span class="keyword">pass</span> <span class="comment"># maybe another proposer has finished a proposal for the value, what should we give back to client? </span></span><br><span class="line">        <span class="keyword">elif</span> len(res_data) &lt; (self.quorumn_number / <span class="number">2</span> + <span class="number">1</span>):</span><br><span class="line">            <span class="keyword">pass</span> <span class="comment"># failed, maybe timeout due to network or server crash?</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            voted_data = [(i[<span class="number">1</span>], i[<span class="number">2</span>]) <span class="keyword">for</span> i <span class="keyword">in</span> self.res_data]</span><br><span class="line">            voted_data.sort()</span><br><span class="line">            <span class="keyword">if</span> voted_data[<span class="number">0</span>][<span class="number">1</span>] <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">None</span>:</span><br><span class="line">                self.client_req_value = voted_data[<span class="number">0</span>][<span class="number">1</span>] </span><br><span class="line">            self.commit((self.last_sent_ballot_id, self.client_req_value))</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">commit</span><span class="params">(self, reqData)</span>:</span></span><br><span class="line">        <span class="keyword">pass</span></span><br></pre></td></tr></table></figure></p>
<hr>
<ul>
<li>ref:<ul>
<li><a href="http://research.microsoft.com/en-us/um/people/lamport/pubs/paxos-simple.pdf" target="_blank" rel="external">Paxos Made Simple</a></li>
</ul>
</li>
</ul>

    
  </div>
</article>


   

   



</div>


  <a id="backTop" class="back-top">
    <i class="icon-angle-up"></i>
  </a>




  <div class="modal" id="modal">
  <span id="cover" class="cover hide"></span>
  <div id="modal-dialog" class="modal-dialog hide-dialog">
    <div class="modal-header">
      <span id="close" class="btn-close">Close</span>
    </div>
    <hr>
    <div class="modal-body">
      <ul class="list-toolbox">
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/"
              rel="noopener noreferrer"
              target="_self"
              >
              Home
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/archives/"
              rel="noopener noreferrer"
              target="_self"
              >
              Archives
            </a>
          </li>
        
          <li class="item-toolbox">
            <a
              class="ROUND_RECT"
              href="/about/"
              rel="noopener noreferrer"
              target="_self"
              >
              About
            </a>
          </li>
        
      </ul>

    </div>
  </div>
</div>



  
      <div class="fexo-comments comments-post">
    
  <section class="disqus-comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
  </section>

  <script>
    var disqus_shortname = 'feilengcui';
    
    var disqus_url = '/2015/12/18/Distributed-Systems-Paxos/';
    
    (function(){
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>

  <script id="dsq-count-scr" src="//feilengcui.disqus.com/count.js" async></script>



    




    

  </div>

  

  <script type="text/javascript">
  function loadScript(url, callback) {
    var script = document.createElement('script')
    script.type = 'text/javascript';

    if (script.readyState) { //IE
      script.onreadystatechange = function() {
        if (script.readyState == 'loaded' ||
          script.readyState == 'complete') {
          script.onreadystatechange = null;
          callback();
        }
      };
    } else { //Others
      script.onload = function() {
        callback();
      };
    }

    script.src = url;
    document.getElementsByTagName('head')[0].appendChild(script);
  }

  window.onload = function() {
    loadScript('/js/bundle.js?235683', function() {
      // load success
    });
  }
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>
</body>
</html>
